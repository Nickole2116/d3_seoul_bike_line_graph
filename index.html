<!DOCTYPE html>
<meta charset="utf-8">
<head>
<style>

.axis .domain {
  display: none;
}

</style>
</head>
<body style="width: 100%;margin-left:none;background-color:#173036">
    <div style="width: 100%;background-color:#173036;color:#365b65;"><h1 style="text-align: center;font-family:Arial, Helvetica, sans-serif">Autumn Bike Renting Rates in Seoul</h1></div>
    <div id="total_rented"></div>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3.v4.js"></script>


</body>

<script>

  // set the dimensions and margins of the graph
  var margin = {top: 10, right: 30, bottom: 30, left: 60},
      width = 1000 - margin.left - margin.right,
      full_width = 1000,
      height = 400 - margin.top - margin.bottom,
      full_height = 400;

  // append the svg object to the body of the page
  var svg = d3.select("#total_rented")
            .append("svg")
              .attr("width", full_width)
              .attr("height", full_height)
            .append("g")
              .attr("transform",
                    "translate(" + margin.left + "," + margin.top + ")");

  var formatTime = d3.timeParse("%m/%d/%Y");
  //load the dataset and generate it into variables
  d3.csv("datas.csv",
    function(d){
      return { Date : formatTime(d.Date), rented_count : d.rented_count }
    },
    function(data){

      console.log(data);

        // Max value observed:
        const max = d3.max(data, function(d) { return +d.rented_count; })

      var x = d3.scaleTime()
        .domain(d3.extent(data, function(d) { return d.Date; }))
        .range([ 0, width ]);
      
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

        // Add Y axis
      var y = d3.scaleLinear()
        .domain([0, max])
        .range([ height, 0 ]);

      svg.append("g")
        .call(d3.axisLeft(y));

      

        // Set the gradient
      svg.append("linearGradient")
        .attr("id", "line-gradient")
        .attr("gradientUnits", "userSpaceOnUse")
        .attr("x1", 0)
        .attr("y1", y(0))
        .attr("x2", 0)
        .attr("y2", y(max))
        .selectAll("stop")
          .data([
            {offset: "0%", color: "blue"},
            {offset: "100%", color: "red"}
          ])
        .enter().append("stop")
          .attr("offset", function(d) { return d.offset; })
          .attr("stop-color", function(d) { return d.color; });

          // Add the line
        svg.append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "url(#line-gradient)" )
          .attr("stroke-width", 2)
          .attr("d", d3.line()
            .x(function(d) { return x(d.Date) })
            .y(function(d) { return y(d.rented_count) })
            )


    })



</script>